{% extends "base_nav.html" %}
{% block title %}Prédiction{% endblock %}
{% block content_title %}Prédiction{% endblock %}
{% block content_body %}

{% if y %}
<div class="card text-center text-white bg-success">
    <h5 class="card-header">AI-STIMATE</h5>
    <div class="card-body">
      <h5 class="card-title">Prédiction de votre bien immobilier avec notre modèle de machine learning</h5>
      <p class="card-text"> L'estimation de votre bien est de {{"{0:0.2f}".format(y[0])}} $ avec une confiance à {{"{0:0.2f}".format(r_score*100)}} %.</p>
    </div>
  </div>
  <div class="card">
      <div class="card-body">
          <img src="{{ url_for('api.plot_estimate') }}?median_income={{ predict_form.median_income.data }}&median_house_value={{ y[0] }}">
      </div>
  </div>
{% endif %}


<div class="col-12">
<form class="row g-3 m-auto" method="POST">
    <div class="col-md-12">
        <label for="inputAdress" class="form-label">Adresse</label>
        {{ predict_form.adresse(class="form-control", id="inputAdress", placeholder="1234 Main St") }}
    </div>
    <div class="col-md-12">
        <label for="inputAdress2" class="form-label">Adresse 2</label>
        {{ predict_form.adresse2(class="form-control", id="inputAdress2", placeholder="Apartment, studio, or floor") }}
    </div>
    <div class="col-md-5">
        <label for="inputCity" class="form-label">Ville</label>
        {{ predict_form.ville(class="form-control", id="inputCity", placeholder="Los Angeles") }}
    </div>
    <div class="col-md-4">
        <label for="inputState" class="form-label">État</label>
        {{ predict_form.etat(class="form-control", id="inputState", placeholder="Californie") }}
    </div>
    <div class="col-md-3">
        <label for="inputZip" class="form-label">Code Postal</label>
        {{ predict_form.code_postal(class="form-control", id="inputZip") }}
    </div>
    <div class="row g-2 m-auto mt-5">
        <div class="form-group col-md-6">
            <label for="inputMedianAge">Âge moyen du foyer</label>
            {{ predict_form.median_age(class="form-control", id="inputMedianAge") }}
          </div>
          <div class="form-group col-md-6">
              <label for="inputRooms">Nombre de pièces</label>
              {{ predict_form.total_rooms(class="form-control", id="inputRooms") }}
          </div>
          <div class="form-group col-md-6">
              <label for="inputBedrooms">Nombre de chambres</label>
              {{ predict_form.total_bedrooms(class="form-control", id="inputBedrooms") }}
          </div>
          <div class="form-group col-md-6">
              <label for="inputPopulation">Population</label>
              {{ predict_form.population(class="form-control", id="inputPopulation") }}
          </div>
          <div class="form-group col-md-6">
              <label for="inputHouseholds">Nombre de personnes composant le foyer</label>
              {{ predict_form.households(class="form-control", id="inputHouseholds") }}
          </div>
          <div class="form-group col-md-6">
              <label for="inputIncome">Revenu médian des foyers pour votre bloc</label>
              {{ predict_form.median_income(class="form-control", id="inputIncome") }}
          </div>

          <div class="row g-2 m-auto mt-2">
              <p>Proximité à l'océan</p>
            {% for radio in predict_form.ocean_proximity %}
                    <div class="form-check">
                        {{ radio(class="form-check-input") }}
                        {{ radio.label(class="form-check-label") }}
                    </div>
            {% endfor %}
          </div>
      </div>
    <div class="row my-3">
      <button type="submit" class="btn btn-primary">{% if y %}Estimer un autre bien{% else %}Estimer le bien{% endif %}</button>
    </div>
    {{ predict_form.csrf_token }}
</form>
</div>



  {% endblock %}




